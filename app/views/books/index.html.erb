<%= form_tag(books_path, :method => "get", id: "search-form") do %>
    <%= text_field_tag :search, params[:search], placeholder: "Search Books" %>
    <%= submit_tag "Search", name: nil  %>
<% end %>

<p><%= link_to "Back", root_path %></p>

<h2>Books</h2>

<% if @books.present? %>
    <table border="4" >
      <tr>
        <th>ISBN</th>
        <th>Title</th>
        <th>Authors</th>
        <th>Description</th>
        <th>Status</th>
        <% if admin_logged_in? %>
          <th>Edit</th>
          <th>Delete</th>
        <% end %>
      </tr>
      <% @books.order("created_at DESC").each do |book| %>
          <tr>
            <td><%= link_to book.isbn, book_path(book) %></td>
            <td><%= book.title %></td>
            <td><%= book.author %></td>
            <td><%= book.description %></td>
            <td><%= book.status %></td>
            <% if admin_logged_in? %>
              <td><%= link_to 'Edit', edit_book_path(book) %></td>
              <td><%= link_to 'Delete', book_path(book), method: :delete, data: { confirm: 'Are you sure you want to delete the book?'} %></td>
            <%end%>
          </tr>
      <%end%>
    </table>

    <br/>
    <%= paginate @books %>
    <%= page_entries_info @books %>
<% else %>
    <p>There are no books containing the term(s) <%= params[:search] %>.</p>
<% end %>
